{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] = \"live_lRZEIkhbwtvfK1yPxtwtCkUy1ANlxpe35OrJl3neeWXcmXVdB9lEFrv8VKk1XIgE\";\n\n\nconst BASE_URL = 'https://api.thecatapi.com';\nconst ENDPOINT_BREEDS = 'v1/breeds';\nconst ENDPOINT_IMG_SEARCH = 'v1/images/search';\n\n\nfunction fetchUrl(url) {\n    return axios.get(url)\n        .then(resp => {\n            if (resp.status >= 400) {\n                return new Error(resp.statusText);\n            }\n            return resp.data;\n        });\n}\n\nfunction getUrl(endpoint, params = '') {\n    return `${BASE_URL}/${endpoint}${params}`;\n}\n\nexport function fetchBreeds() {\n    const breedsUrl = getUrl(ENDPOINT_BREEDS);\n    return fetchUrl(breedsUrl);        \n}\n\nexport function fetchCatByBreed(breedId) {\n    const params = new URLSearchParams({\n        breed_ids: breedId\n    });\n    const searchUrl = getUrl(ENDPOINT_IMG_SEARCH, `?${params}`);\n    return fetchUrl(searchUrl);\n}","import SlimSelect from 'slim-select';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst slimSelectSettings = {\n    showSearch: false,\n    placeholderText: \"Select cat's breed\"\n}\n\nconst slimSelectEvent = {\n    afterChange: onSelectChange\n}\n\nconst elements = {\n    selectWraper: document.querySelector('.select-wraper'),\n    selectBreed: new SlimSelect({\n        select: '.breed-select',\n        settings: slimSelectSettings,\n        events: slimSelectEvent\n    }),\n    pLoader: document.querySelector('.loader'),\n    divCatInfo: document.querySelector('.cat-info')\n}\n\nfunction fillCatsData(cats) {\n\n    const breedsData = [{\n        placeholder: true,\n        text: \"Select cat's breed\"\n    }];\n    \n    cats.forEach(cat => breedsData.push({\n            text: `${cat.name}`,\n            value: `${cat.id}`\n        })\n    );\n    \n    elements.selectBreed.setData(breedsData);\n\n    setVisibility(elements.pLoader, false);\n    setVisibility(elements.selectWraper, true);\n}\n\nfunction showSearchResult({ url, breeds: info } = cat) {\n    const contentHTML = `\n        <img class=\"image\" src=\"${url}\" alt=\"${info[0].name}\" />\n        <div class=\"text-info-block\">\n            <h2 class=\"breed-name\">${info[0].name}</h2>\n            <p class=\"description\">${info[0].description}</p>\n            <p><span class=\"temperament\">Temperament:</span> ${info[0].temperament}</p>\n        </div>\n    `\n    elements.divCatInfo.innerHTML = contentHTML;\n    setVisibility(elements.pLoader, false);\n    setVisibility(elements.selectWraper, true);\n    setVisibility(elements.divCatInfo, true);\n}\n\nfunction showErrorMessage() {\n    setVisibility(elements.pLoader, false);\n    iziToast.show({\n        message: \"Oops! Something went wrong! Try reloading the page!\",\n        messageColor: 'white',\n        backgroundColor: 'tomato',\n        timeout: 4000,\n        position: 'topCenter'\n    });\n}\n\nfunction setVisibility(element, isVisible) {\n    if (isVisible) {\n        element.removeAttribute(\"hidden\");\n    } else {\n        element.setAttribute(\"hidden\", \"\");\n    }\n}\n\nsetVisibility(elements.selectWraper, false);\nsetVisibility(elements.divCatInfo, false);\n\nfetchBreeds()\n    .then(data => fillCatsData(data))\n    .catch(err => showErrorMessage());\n\nfunction onSelectChange(values) {\n    if (!values[0].placeholder) {\n        setVisibility(elements.pLoader, true);\n        setVisibility(elements.divCatInfo, false);\n        elements.divCatInfo.innerHTML = '';\n\n        fetchCatByBreed(values[0].value)\n            .then(data => showSearchResult(data[0]))\n            .catch(err => showErrorMessage());\n    }    \n}\n"],"names":["axios","BASE_URL","ENDPOINT_BREEDS","ENDPOINT_IMG_SEARCH","fetchUrl","url","resp","getUrl","endpoint","params","fetchBreeds","breedsUrl","fetchCatByBreed","breedId","searchUrl","slimSelectSettings","slimSelectEvent","onSelectChange","elements","SlimSelect","fillCatsData","cats","breedsData","cat","setVisibility","showSearchResult","info","contentHTML","showErrorMessage","iziToast","element","isVisible","data","err","values"],"mappings":"owBACAA,EAAM,SAAS,QAAQ,OAAO,aAAe,wEAG7C,MAAMC,EAAW,4BACXC,EAAkB,YAClBC,EAAsB,mBAG5B,SAASC,EAASC,EAAK,CACnB,OAAOL,EAAM,IAAIK,CAAG,EACf,KAAKC,GACEA,EAAK,QAAU,IACR,IAAI,MAAMA,EAAK,UAAU,EAE7BA,EAAK,IACf,CACT,CAEA,SAASC,EAAOC,EAAUC,EAAS,GAAI,CACnC,MAAO,GAAGR,KAAYO,IAAWC,GACrC,CAEO,SAASC,GAAc,CAC1B,MAAMC,EAAYJ,EAAOL,CAAe,EACxC,OAAOE,EAASO,CAAS,CAC7B,CAEO,SAASC,EAAgBC,EAAS,CACrC,MAAMJ,EAAS,IAAI,gBAAgB,CAC/B,UAAWI,CACnB,CAAK,EACKC,EAAYP,EAAOJ,EAAqB,IAAIM,GAAQ,EAC1D,OAAOL,EAASU,CAAS,CAC7B,CC7BA,MAAMC,EAAqB,CACvB,WAAY,GACZ,gBAAiB,oBACrB,EAEMC,EAAkB,CACpB,YAAaC,CACjB,EAEMC,EAAW,CACb,aAAc,SAAS,cAAc,gBAAgB,EACrD,YAAa,IAAIC,EAAW,CACxB,OAAQ,gBACR,SAAUJ,EACV,OAAQC,CAChB,CAAK,EACD,QAAS,SAAS,cAAc,SAAS,EACzC,WAAY,SAAS,cAAc,WAAW,CAClD,EAEA,SAASI,EAAaC,EAAM,CAExB,MAAMC,EAAa,CAAC,CAChB,YAAa,GACb,KAAM,oBACd,CAAK,EAEDD,EAAK,QAAQE,GAAOD,EAAW,KAAK,CAC5B,KAAM,GAAGC,EAAI,OACb,MAAO,GAAGA,EAAI,IAC1B,CAAS,CACT,EAEIL,EAAS,YAAY,QAAQI,CAAU,EAEvCE,EAAcN,EAAS,QAAS,EAAK,EACrCM,EAAcN,EAAS,aAAc,EAAI,CAC7C,CAEA,SAASO,EAAiB,CAAE,IAAApB,EAAK,OAAQqB,CAAI,EAAK,IAAK,CACnD,MAAMC,EAAc;AAAA,kCACUtB,WAAaqB,EAAK,GAAG;AAAA;AAAA,qCAElBA,EAAK,GAAG;AAAA,qCACRA,EAAK,GAAG;AAAA,+DACkBA,EAAK,GAAG;AAAA;AAAA,MAGnER,EAAS,WAAW,UAAYS,EAChCH,EAAcN,EAAS,QAAS,EAAK,EACrCM,EAAcN,EAAS,aAAc,EAAI,EACzCM,EAAcN,EAAS,WAAY,EAAI,CAC3C,CAEA,SAASU,GAAmB,CACxBJ,EAAcN,EAAS,QAAS,EAAK,EACrCW,EAAS,KAAK,CACV,QAAS,sDACT,aAAc,QACd,gBAAiB,SACjB,QAAS,IACT,SAAU,WAClB,CAAK,CACL,CAEA,SAASL,EAAcM,EAASC,EAAW,CACnCA,EACAD,EAAQ,gBAAgB,QAAQ,EAEhCA,EAAQ,aAAa,SAAU,EAAE,CAEzC,CAEAN,EAAcN,EAAS,aAAc,EAAK,EAC1CM,EAAcN,EAAS,WAAY,EAAK,EAExCR,EAAa,EACR,KAAKsB,GAAQZ,EAAaY,CAAI,CAAC,EAC/B,MAAMC,GAAOL,EAAgB,CAAE,EAEpC,SAASX,EAAeiB,EAAQ,CACvBA,EAAO,GAAG,cACXV,EAAcN,EAAS,QAAS,EAAI,EACpCM,EAAcN,EAAS,WAAY,EAAK,EACxCA,EAAS,WAAW,UAAY,GAEhCN,EAAgBsB,EAAO,GAAG,KAAK,EAC1B,KAAKF,GAAQP,EAAiBO,EAAK,EAAE,CAAC,EACtC,MAAMC,GAAOL,EAAgB,CAAE,EAE5C"}