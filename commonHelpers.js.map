{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] = \"live_lRZEIkhbwtvfK1yPxtwtCkUy1ANlxpe35OrJl3neeWXcmXVdB9lEFrv8VKk1XIgE\";\n\n\nconst BASE_URL = 'https://api.thecatapi.com';\nconst ENDPOINT_BREEDS = 'v1/breeds';\nconst ENDPOINT_IMG_SEARCH = 'v1/images/search';\n\n\nfunction fetchUrl(url) {\n    return axios.get(url)\n        .then(resp => {\n            if (resp.status >= 400) {\n                return new Error(resp.statusText);\n            }\n            return resp.data;\n        });\n}\n\nfunction getUrl(endpoint, params = '') {\n    return `${BASE_URL}/${endpoint}${params}`;\n}\n\nexport function fetchBreeds() {\n    const breedsUrl = getUrl(ENDPOINT_BREEDS);\n    return fetchUrl(breedsUrl);        \n}\n\nexport function fetchCatByBreed(breedId) {\n    const params = new URLSearchParams({\n        breed_ids: breedId\n    });\n    const searchUrl = getUrl(ENDPOINT_IMG_SEARCH, `?${params}`);\n    return fetchUrl(searchUrl);\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst elements = {\n    selectBreed: document.querySelector('.breed-select'),\n    pLoader: document.querySelector('.loader'),\n    divCatInfo: document.querySelector('.cat-info')\n}\n\nfunction fillCatsData(cats) {\n    const selectDataHTML = cats.map(cat => {\n        return `<option value=\"${cat.id}\">${cat.name}</option>`;\n    }).join('');\n\n    elements.selectBreed.insertAdjacentHTML(\"afterbegin\", selectDataHTML);\n    setVisibility(elements.pLoader, false);\n    setVisibility(elements.selectBreed, true);\n}\n\nfunction showSearchResult({ url, breeds: info } = cat) {\n    const contentHTML = `\n        <img class=\"image\" src=\"${url}\" alt=\"${info[0].name}\" />\n        <div class=\"text-info-block\">\n            <h2 class=\"breed-name\">${info[0].name}</h2>\n            <p class=\"description\">${info[0].description}</p>\n            <p><span class=\"temperament\">Temperament:</span> ${info[0].temperament}</p>\n        </div>\n    `\n    elements.divCatInfo.innerHTML = contentHTML;\n    setVisibility(elements.pLoader, false);\n    setVisibility(elements.selectBreed, true);\n    setVisibility(elements.divCatInfo, true);\n}\n\nfunction showErrorMessage() {\n    setVisibility(elements.pLoader, false);\n    iziToast.show({\n        message: \"Oops! Something went wrong! Try reloading the page!\",\n        messageColor: 'white',\n        backgroundColor: 'tomato',\n        timeout: 4000,\n        position: 'topCenter'\n    });\n}\n\nfunction setVisibility(element, isVisible) {\n    if (isVisible) {\n        element.removeAttribute(\"hidden\");\n    } else {\n        element.setAttribute(\"hidden\", \"\");\n    }\n}\n\nsetVisibility(elements.divCatInfo, false);\n\nfetchBreeds()\n    .then(data => fillCatsData(data))\n    .catch(err => showErrorMessage());\n\nconst onSelectChange = evt => {\n    elements.divCatInfo.innerHTML = '';\n    setVisibility(elements.pLoader, true);\n    setVisibility(elements.selectBreed, false);\n    setVisibility(elements.divCatInfo, false);\n\n    fetchCatByBreed(evt.target.value)\n        .then(data => showSearchResult(data[0]))\n        .catch(err => showErrorMessage());\n}\n\nelements.selectBreed.addEventListener('change', onSelectChange);"],"names":["axios","BASE_URL","ENDPOINT_BREEDS","ENDPOINT_IMG_SEARCH","fetchUrl","url","resp","getUrl","endpoint","params","fetchBreeds","breedsUrl","fetchCatByBreed","breedId","searchUrl","elements","fillCatsData","cats","selectDataHTML","cat","setVisibility","showSearchResult","info","contentHTML","showErrorMessage","iziToast","element","isVisible","data","err","onSelectChange","evt"],"mappings":"6vBACAA,EAAM,SAAS,QAAQ,OAAO,aAAe,wEAG7C,MAAMC,EAAW,4BACXC,EAAkB,YAClBC,EAAsB,mBAG5B,SAASC,EAASC,EAAK,CACnB,OAAOL,EAAM,IAAIK,CAAG,EACf,KAAKC,GACEA,EAAK,QAAU,IACR,IAAI,MAAMA,EAAK,UAAU,EAE7BA,EAAK,IACf,CACT,CAEA,SAASC,EAAOC,EAAUC,EAAS,GAAI,CACnC,MAAO,GAAGR,KAAYO,IAAWC,GACrC,CAEO,SAASC,GAAc,CAC1B,MAAMC,EAAYJ,EAAOL,CAAe,EACxC,OAAOE,EAASO,CAAS,CAC7B,CAEO,SAASC,EAAgBC,EAAS,CACrC,MAAMJ,EAAS,IAAI,gBAAgB,CAC/B,UAAWI,CACnB,CAAK,EACKC,EAAYP,EAAOJ,EAAqB,IAAIM,GAAQ,EAC1D,OAAOL,EAASU,CAAS,CAC7B,CC9BA,MAAMC,EAAW,CACb,YAAa,SAAS,cAAc,eAAe,EACnD,QAAS,SAAS,cAAc,SAAS,EACzC,WAAY,SAAS,cAAc,WAAW,CAClD,EAEA,SAASC,EAAaC,EAAM,CACxB,MAAMC,EAAiBD,EAAK,IAAIE,GACrB,kBAAkBA,EAAI,OAAOA,EAAI,eAC3C,EAAE,KAAK,EAAE,EAEVJ,EAAS,YAAY,mBAAmB,aAAcG,CAAc,EACpEE,EAAcL,EAAS,QAAS,EAAK,EACrCK,EAAcL,EAAS,YAAa,EAAI,CAC5C,CAEA,SAASM,EAAiB,CAAE,IAAAhB,EAAK,OAAQiB,CAAI,EAAK,IAAK,CACnD,MAAMC,EAAc;AAAA,kCACUlB,WAAaiB,EAAK,GAAG;AAAA;AAAA,qCAElBA,EAAK,GAAG;AAAA,qCACRA,EAAK,GAAG;AAAA,+DACkBA,EAAK,GAAG;AAAA;AAAA,MAGnEP,EAAS,WAAW,UAAYQ,EAChCH,EAAcL,EAAS,QAAS,EAAK,EACrCK,EAAcL,EAAS,YAAa,EAAI,EACxCK,EAAcL,EAAS,WAAY,EAAI,CAC3C,CAEA,SAASS,GAAmB,CACxBJ,EAAcL,EAAS,QAAS,EAAK,EACrCU,EAAS,KAAK,CACV,QAAS,sDACT,aAAc,QACd,gBAAiB,SACjB,QAAS,IACT,SAAU,WAClB,CAAK,CACL,CAEA,SAASL,EAAcM,EAASC,EAAW,CACnCA,EACAD,EAAQ,gBAAgB,QAAQ,EAEhCA,EAAQ,aAAa,SAAU,EAAE,CAEzC,CAEAN,EAAcL,EAAS,WAAY,EAAK,EAExCL,EAAa,EACR,KAAKkB,GAAQZ,EAAaY,CAAI,CAAC,EAC/B,MAAMC,GAAOL,EAAgB,CAAE,EAEpC,MAAMM,EAAiBC,GAAO,CAC1BhB,EAAS,WAAW,UAAY,GAChCK,EAAcL,EAAS,QAAS,EAAI,EACpCK,EAAcL,EAAS,YAAa,EAAK,EACzCK,EAAcL,EAAS,WAAY,EAAK,EAExCH,EAAgBmB,EAAI,OAAO,KAAK,EAC3B,KAAKH,GAAQP,EAAiBO,EAAK,EAAE,CAAC,EACtC,MAAMC,GAAOL,EAAgB,CAAE,CACxC,EAEAT,EAAS,YAAY,iBAAiB,SAAUe,CAAc"}