{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.headers.common['x-api-key'] = \"live_lRZEIkhbwtvfK1yPxtwtCkUy1ANlxpe35OrJl3neeWXcmXVdB9lEFrv8VKk1XIgE\";\n\nconst url = {\n    base: 'https://api.thecatapi.com',\n    endpoint: {\n        breed: '/v1/breeds',\n        searchById: '/v1/images/search'\n    }\n\n}\nfunction fetchUrl(url) {\n    return axios.get(url)\n        .then(resp => {\n            if (resp.status !== 200) {\n                return new Error(resp.statusText);\n            }\n            return resp.data;\n        });\n}\n\nfunction getUrl(base, endpoint, params = '') {\n    return `${base}${endpoint}${params}`;\n}\n\nexport function fetchBreeds() {\n    const breedsUrl = getUrl(url.base, url.endpoint.breed);\n    return fetchUrl(breedsUrl);        \n}\n\nexport function fetchCatByBreed(breedId) {\n    const params = new URLSearchParams({\n        breed_ids: breedId\n    });\n    const searchUrl = getUrl(url.base, url.endpoint.searchById, `?${params}`);\n    return fetchUrl(searchUrl);\n}","import { fetchBreeds, fetchCatByBreed } from './cat-api';\n\nconst elements = {\n    selectBreed: document.querySelector('.breed-select'),\n    pLoader: document.querySelector('.loader'),\n    pError: document.querySelector('.error'),\n    divCatInfo: document.querySelector('.cat-info')\n}\n\nfunction fillCatsData(cats) {\n    const selectDataHTML = cats.map(cat => {\n        return `<option value=\"${cat.id}\">${cat.name}</option>`;\n    }).join('');\n\n    elements.selectBreed.insertAdjacentHTML(\"afterbegin\", selectDataHTML);\n}\n\nfunction showSearchResult({ url, breeds: info } = cat) {\n    const contentHTML = `\n        <img src=\"${url}\" alt=\"${info[0].name}\" width=\"400\" />\n        <h2>${info[0].name}</h2>\n        <p>${info[0].description}</p>\n        <p>Temperament: ${info[0].name}</p>\n    `\n    elements.divCatInfo.insertAdjacentHTML(\"afterbegin\", contentHTML);\n}\n\nfetchBreeds()\n    .then(data => fillCatsData(data))\n    .catch(err => console.log(err));\n\nconst onSelectChange = evt => {\n    fetchCatByBreed(evt.target.value)\n        .then(data => showSearchResult(data[0]))\n        .catch(err => console.log(err));\n}\n\nelements.selectBreed.addEventListener('change', onSelectChange);"],"names":["axios","url","fetchUrl","resp","getUrl","base","endpoint","params","fetchBreeds","breedsUrl","fetchCatByBreed","breedId","searchUrl","elements","fillCatsData","cats","selectDataHTML","cat","showSearchResult","info","contentHTML","data","err","onSelectChange","evt"],"mappings":"svBACAA,EAAM,SAAS,QAAQ,OAAO,aAAe,wEAE7C,MAAMC,EAAM,CACR,KAAM,4BACN,SAAU,CACN,MAAO,aACP,WAAY,mBACf,CAEL,EACA,SAASC,EAASD,EAAK,CACnB,OAAOD,EAAM,IAAIC,CAAG,EACf,KAAKE,GACEA,EAAK,SAAW,IACT,IAAI,MAAMA,EAAK,UAAU,EAE7BA,EAAK,IACf,CACT,CAEA,SAASC,EAAOC,EAAMC,EAAUC,EAAS,GAAI,CACzC,MAAO,GAAGF,IAAOC,IAAWC,GAChC,CAEO,SAASC,GAAc,CAC1B,MAAMC,EAAYL,EAAOH,EAAI,KAAMA,EAAI,SAAS,KAAK,EACrD,OAAOC,EAASO,CAAS,CAC7B,CAEO,SAASC,EAAgBC,EAAS,CACrC,MAAMJ,EAAS,IAAI,gBAAgB,CAC/B,UAAWI,CACnB,CAAK,EACKC,EAAYR,EAAOH,EAAI,KAAMA,EAAI,SAAS,WAAY,IAAIM,GAAQ,EACxE,OAAOL,EAASU,CAAS,CAC7B,CClCA,MAAMC,EAAW,CACb,YAAa,SAAS,cAAc,eAAe,EACnD,QAAS,SAAS,cAAc,SAAS,EACzC,OAAQ,SAAS,cAAc,QAAQ,EACvC,WAAY,SAAS,cAAc,WAAW,CAClD,EAEA,SAASC,EAAaC,EAAM,CACxB,MAAMC,EAAiBD,EAAK,IAAIE,GACrB,kBAAkBA,EAAI,OAAOA,EAAI,eAC3C,EAAE,KAAK,EAAE,EAEVJ,EAAS,YAAY,mBAAmB,aAAcG,CAAc,CACxE,CAEA,SAASE,EAAiB,CAAE,IAAAjB,EAAK,OAAQkB,CAAI,EAAK,IAAK,CACnD,MAAMC,EAAc;AAAA,oBACJnB,WAAakB,EAAK,GAAG;AAAA,cAC3BA,EAAK,GAAG;AAAA,aACTA,EAAK,GAAG;AAAA,0BACKA,EAAK,GAAG;AAAA,MAE9BN,EAAS,WAAW,mBAAmB,aAAcO,CAAW,CACpE,CAEAZ,EAAa,EACR,KAAKa,GAAQP,EAAaO,CAAI,CAAC,EAC/B,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAElC,MAAMC,EAAiBC,GAAO,CAC1Bd,EAAgBc,EAAI,OAAO,KAAK,EAC3B,KAAKH,GAAQH,EAAiBG,EAAK,EAAE,CAAC,EACtC,MAAMC,GAAO,QAAQ,IAAIA,CAAG,CAAC,CACtC,EAEAT,EAAS,YAAY,iBAAiB,SAAUU,CAAc"}